<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>
    <style>
      #menu {
        position: fixed;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(0, 0, 0, 0.7);
        padding: 10px 20px;
        border-radius: 15px;
        color: white;
        font-family: sans-serif;
        z-index: 999;
        text-align: center;
        width: 80%;
        max-width: 400px;
      }

      #menu button {
        margin: 5px;
        padding: 8px 15px;
        border: none;
        border-radius: 10px;
        background: #1e90ff;
        color: white;
        font-weight: bold;
        cursor: pointer;
      }

      #menu button:hover {
        background: #4682b4;
      }

      #fact-box {
        margin-top: 10px;
        font-size: 14px;
      }
    </style>
  </head>
  <body>
    <!-- Men칰 flotante -->
    <div id="menu">
      <div>
        <button id="btnWhale">游냡 Ballena</button>
        <button id="btnOctopus">游냋 Pulpo</button>
      </div>
      <div id="fact-box">Selecciona un animal para ver curiosidades</div>
      <div>
        <button id="btnPrev">拘勇 Anterior</button>
        <button id="btnNext">俱뫮잺 Siguiente</button>
      </div>
    </div>

    <!-- Escena AR -->
    <a-scene
      mindar-image="imageTargetSrc: ./targets.mind; maxTrack: 1"
      color-space="sRGB"
      renderer="colorManagement: true, physicallyCorrectLights"
      vr-mode-ui="enabled: false"
      device-orientation-permission-ui="enabled: false"
    >
      <a-assets>
        <a-asset-item id="WhaleModel" src="./WhaleO1.glb"></a-asset-item>
        <a-asset-item id="OctopusModel" src="./Octopus.glb"></a-asset-item>
      </a-assets>

      <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

      <!-- Target 칰nico -->
      <a-entity id="target-0" mindar-image-target="targetIndex: 0">
        <a-gltf-model
          id="animal-model"
          src="#WhaleModel"
          rotation="0 0 0"
          position="0 0 0"
          scale="0.7 0.7 0.7"
          animation__updown="property: position; to: 0 0.3 0; dur: 2000; easing: easeInOutSine; loop: true; dir: alternate"
          animation__spin="property: rotation; to: 0 360 0; dur: 5000; loop: true; easing: linear"
        ></a-gltf-model>
      </a-entity>
    </a-scene>

    <script>
      const model = document.querySelector("#animal-model");
      const factBox = document.querySelector("#fact-box");

      // Datos curiosos
      const facts = {
        whale: [
          "Las ballenas azules son los animales m치s grandes que han existido.",
          "Su coraz칩n puede pesar lo mismo que un coche peque침o.",
          "Se comunican con cantos que viajan grandes distancias bajo el agua."
        ],
        octopus: [
          "Los pulpos tienen tres corazones y sangre azul.",
          "Pueden cambiar de color y textura para camuflarse.",
          "Son considerados de los invertebrados m치s inteligentes."
        ]
      };

      let currentAnimal = "whale";
      let factIndex = 0;

      // --- Funci칩n para mostrar curiosidad ---
      function showFact() {
        factBox.innerText = facts[currentAnimal][factIndex];
      }

      // --- Botones para cambiar de animal ---
      document.querySelector("#btnWhale").addEventListener("click", () => {
        model.setAttribute("src", "#WhaleModel");
        model.setAttribute("scale", "0.7 0.7 0.7");
        model.setAttribute("position", "0 0 0");
        currentAnimal = "whale";
        factIndex = 0;
        showFact();
      });

      document.querySelector("#btnOctopus").addEventListener("click", () => {
        model.setAttribute("src", "#OctopusModel");
        model.setAttribute("scale", "0.05 0.05 0.05");
        model.setAttribute("position", "0 -0.25 0");
        currentAnimal = "octopus";
        factIndex = 0;
        showFact();
      });

      // --- Botones para navegar entre curiosidades ---
      document.querySelector("#btnNext").addEventListener("click", () => {
        if (factIndex < facts[currentAnimal].length - 1) {
          factIndex++;
        } else {
          factIndex = 0;
        }
        showFact();
      });

      document.querySelector("#btnPrev").addEventListener("click", () => {
        if (factIndex > 0) {
          factIndex--;
        } else {
          factIndex = facts[currentAnimal].length - 1;
        }
        showFact();
      });
    </script>
  </body>
</html>

