<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      body, html {
        margin: 0;
        padding: 0;
        overflow: hidden;
      }

      /* Menú fijo arriba */
      #menu {
        position: absolute;
        top: 10px;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(0, 0, 0, 0.6);
        color: white;
        padding: 15px;
        border-radius: 10px;
        text-align: center;
        font-family: Arial, sans-serif;
        width: 80%;
        max-width: 400px;
      }

      #menu button {
        background: #007BFF;
        border: none;
        color: white;
        padding: 8px 12px;
        margin: 5px;
        border-radius: 5px;
        cursor: pointer;
      }

      #menu button:hover {
        background: #0056b3;
      }
    </style>

    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>
  </head>
  <body>
    <!-- Menú en pantalla -->
    <div id="menu">
      <h3 id="animal-title">Ballena</h3>
      <p id="fact-text">Dato curioso 1: Las ballenas son los animales más grandes del planeta.</p>
      <div>
        <button id="prev-btn">Anterior</button>
        <button id="next-btn">Siguiente</button>
      </div>
    </div>

    <!-- Escena AR -->
    <a-scene
      mindar-image="imageTargetSrc: ./targets.mind; maxTrack: 2"
      color-space="sRGB"
      renderer="colorManagement: true, physicallyCorrectLights"
      vr-mode-ui="enabled: false"
      device-orientation-permission-ui="enabled: false"
    >
      <a-assets>
        <a-asset-item id="WhaleO3" src="./WhaleO1.glb"></a-asset-item>
        <a-asset-item id="OctupusO3" src="./Octopus.glb"></a-asset-item>
      </a-assets>

      <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

      <!-- Ballena -->
      <a-entity mindar-image-target="targetIndex: 0">
        <a-gltf-model
          id="whale-model"
          src="#WhaleO3"
          position="0 0 0"
          scale="0.7 0.7 0.7"
        ></a-gltf-model>
      </a-entity>

      <!-- Pulpo -->
      <a-entity mindar-image-target="targetIndex: 1">
        <a-gltf-model
          id="octopus-model"
          src="#OctupusO3"
          position="0 -0.25 0"
          scale="0.05 0.05 0.05"
        ></a-gltf-model>
      </a-entity>
    </a-scene>

    <script>
      // Datos curiosos
      const whaleFacts = [
        "Dato curioso 1: Las ballenas son los animales más grandes del planeta.",
        "Dato curioso 2: Las ballenas jorobadas pueden cantar canciones complejas.",
        "Dato curioso 3: El corazón de una ballena azul puede pesar más de 150 kg."
      ];

      const octopusFacts = [
        "Dato curioso 1: Los pulpos tienen tres corazones.",
        "Dato curioso 2: Los pulpos pueden cambiar de color y textura para camuflarse.",
        "Dato curioso 3: Son considerados los invertebrados más inteligentes."
      ];

      let whaleIndex = 0;
      let octopusIndex = 0;
      let currentAnimal = "whale"; // por defecto

      const titleEl = document.getElementById("animal-title");
      const factEl = document.getElementById("fact-text");

      // Botones
      document.getElementById("prev-btn").addEventListener("click", () => {
        if (currentAnimal === "whale") {
          whaleIndex = (whaleIndex - 1 + whaleFacts.length) % whaleFacts.length;
          factEl.textContent = whaleFacts[whaleIndex];
        } else {
          octopusIndex = (octopusIndex - 1 + octopusFacts.length) % octopusFacts.length;
          factEl.textContent = octopusFacts[octopusIndex];
        }
      });

      document.getElementById("next-btn").addEventListener("click", () => {
        if (currentAnimal === "whale") {
          whaleIndex = (whaleIndex + 1) % whaleFacts.length;
          factEl.textContent = whaleFacts[whaleIndex];
        } else {
          octopusIndex = (octopusIndex + 1) % octopusFacts.length;
          factEl.textContent = octopusFacts[octopusIndex];
        }
      });

      // Cambiar entre animales al detectar el target
      const whaleTarget = document.querySelector("[mindar-image-target='targetIndex: 0']");
      const octopusTarget = document.querySelector("[mindar-image-target='targetIndex: 1']");

      whaleTarget.addEventListener("targetFound", () => {
        currentAnimal = "whale";
        titleEl.textContent = "Ballena";
        factEl.textContent = whaleFacts[whaleIndex];
      });

      octopusTarget.addEventListener("targetFound", () => {
        currentAnimal = "octopus";
        titleEl.textContent = "Pulpo";
        factEl.textContent = octopusFacts[octopusIndex];
      });
    </script>
  </body>
</html>

